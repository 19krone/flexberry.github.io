---
title: Функциональность при работе с массивами детейловых объектов (DetailArray)
sidebar: flexberry-orm_sidebar
keywords: DataObject (объекты данных), Flexberry ORM, Public
toc: true
permalink: ru/fo_functionality-work-with-detail-array.html
---
* **Продукт**: [Flexberry ORM](fo_flexberry-o-r-m.html)
* **Компонент**: [Объект данных](fo_dataobject.html)
* **Программная библиотека**: ICSSoft.STORMNET.DataObject.dll
* **Предназначение**: Описана базовая функциональность при работе с массивами детейловых объектов (DetailArray).

## Базовая функциональность по работе с массивами детейловых объектов

DetailArray поддерживает базовую функциональность по работе с массивами [детейловых](fo_detail-associations-and-their-properties.html) объектов:

* Поддержка ссылки на [шапку (агрегатор)](fd_key-concepts.html).
* Поддержка коллекции: 
    * добавление (AddObject, AddRange), 
    * вставка (Insert), 
    * удаление (Remove, RemoveByIndex, RemoveByKey),
    * очистка (Clear), 
    * установка/взятие значения (GetByKey, SetByKey),
    * перемещение (Move),
    * количество объектов (Count),
    * перебор объектов в конструкции foreach.
* Поддержка упорядочения (порядка, в котором лежат [объекты данных](fo_dataobject.html)).

### Агрегирующие функции

Чтобы среди объектов, находящихся в массиве [детейлов](fo_detail-associations-and-their-properties.html), посчитать какую-либо агрегирующую функцию (сумма, макс., мин., среднее значение, что-либо произвольное), необходимо в классе, унаследованном от `DetailArray`, определить функцию без параметров, которая возвращает некоторое значение. Далее, к этой функции необходимо приписать атрибут `AggregationFunction`. Параметрами являются: имя свойства, для которого эта агрегирующая функция, и строка формата (`String.Format`), в соответствии с которой значение будет выводиться пользователю. 

{% include important.html content="Агрегирующие функции должны обрабатываются визуальными компонентами редактирования массива детейлов." %}

Атрибут `AggregationFunction` принято обрабатывать следующим образом: если указано имя свойства, то значение агрегирующей функции указывается непосредственно рядом со значениями объектов данных (например, внизу таблицы в соответствующем столбце) и тип возвращаемого функцией значения должен быть тем же или неявно приводимым к типу свойства. Если указана строка формата, тогда значение выводится отдельно, в этом формате.
" %}

### Упорядочивание

Объекты в массиве детейлов могут быть упорядочены (именно упорядочены, а не отсортированы), т.е. располагаться в каком-либо, строго определённом порядке.

Для того, чтобы ввести упорядочение, необходимо в [детейловый класс](fo_detail-associations-and-their-properties.html) данных ввести целочисленное (`System.Int32`) свойство с приписанным атрибутом `Order`. 

{% include important.html content="Упорядочение обрабатывается визуальными компонентами редактирования массива детейлов." %}

{% include note.html content="Без наличия Order-атрибутов детейлы могут возращаться в любом порядке, в отличном от того, в котором они были сохранены." %}


