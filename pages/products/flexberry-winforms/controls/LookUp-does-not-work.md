---
title: Если не работает LookUp
sidebar: product--sidebar
keywords: Windows UI (Контролы)
toc: true
permalink: ru/look-up-does-not-work.html
folder: product--folder
lang: ru
---

# Если не работает LookUp

## Стандартно сгенерированный lookup:
### На форме
Если не срабатывает обработчик события look_LookUpEvent (в зависимой форме)

# Правильно указать путь на форме до control'а Lookup'а в методе '''prv_TuneLookupInformations''' (в зависимой форме).

# Указать форму вызова в методе '''GetEditor''' независимой формы
# На кнопку LookUp'а (например, для Гражданства это будет ctrlГражданство) навесить обработчик '''события''' LookUp'а 
```
this.ctrlГражданство.LookUpEvent += look_LookUpEvent
```
### В GroupEdit'е
# Привязка GropEdit'а к EditManager'у формы
# Наличие обработчика this.gr_SetupEditorEventHandler типа OnSetupEditorEventHandler для события SetupEditor
# Упоминание GroupEdit'a в методе prv_TuneLookupInformations (в зависимой форме), __например__:
```
m_arrGroupEditInformations.Add(
               new ICSSoft.STORMNET.UI.GroupEditInformation(this.ПредметыИзъятия,
               "ИтогиИзъятия.ПредметыИзъятия",
               "STORMCASE.STORMNET.Generator.SerializeNewEditForm/EditPanel(Panel)/TabControl(TabControl)/panel(TabPage)/ПредметыИзъятия(GroupEditBase)"));```

## Руками навешенный или сгенерированный для хитрого случая Lookup:
### Если не поднимается форма на Lookup, то проверьте в указанном порядке:
# Связаны ли объект, который поднимается на Lookup, и объект, который поднимает на LookUp, то есть существует ли ссылка. (Существует ли свойство, имя которого передаётся в качестве PropertyName. Если не существует, то лучше указать пустую строку, так как в противном случае метод Save не будет вызываться).
# Хранимый ли объект поднимаем на Lookup. Если да, то см. п.2, если нет scriptizer не будет обрабатывать его стандартно и событие придётся прописывать вручную.
# Хранимый ли объект, с которого поднимается LookUp. Если да, то см.п.3, если нет, то ... (расписать)
# Какие формы поднимаются и с какой формы
# Поднимается ли с формы по кнопке LookUp'а. Если да, то проверьте, поднимается ли с формы LookUp. Если да, то неправильно указываются параметры. Если не поднимается ни по кнопке, ни из Вашего метода, то есть ошибка не только в Вашем коде.

### Если не выдаётся сообщение о сохранении объекта при закрытии формы, то необходимо проверить
# Объект имеет статус Altered
# Объект изменил свои свойства с момента поднятия формы на LookUp. При поднятии на Lookup форма-инициатор в методе PrepareDataObjectForEdit создаёт копию данных, и при закрытии сравнивается эта копия с текущим на момент закрытия объектом. Сохранение произойдёт только в случае наличия разницы между объектом и его копией.
# Форма корректно поднята на LookUp:
#* передаётся объект формы-инициатора LookUp'а, а не тот, который надо редактировать
#* указано существующее свойство или пустая строка
 

