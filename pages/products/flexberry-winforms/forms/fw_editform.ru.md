---
title: Формы редактирования (классы со стереотипом editform) 
sidebar: flexberry-winforms_sidebar
keywords: Flexberry Designer, Flexberry Winforms
summary: Описано создание формы редактирования в среде  Flexberry Designer и указано, что будет сгенерировано в коде формы в зависимости от указанных в дизайнере свойств
toc: true
permalink: ru/fw_editform.html
lang: ru
---

Описание среды `Flexberry` относительно пользовательского интерфейса изложено в: [Учебник программиста Flexberry Platform](gbt_flexberry-platform-guide.html) раздел "Пользовательский интерфейс "(пункт 45-65).

Форма редактирования обеспечивает пользовательский интерфейс по вводу/редактированию экземпляра объекта данных в одном, либо нескольких представлениях.

Для описания формы редактирования необходимо создать в CASE UML-класс со стереотипом "editform". Например:

![Пример формы редактирования на диаграмме](/images/pages/products/flexberry-winforms/forms/editform.png)

## Что генерируется

* Класс UI-независимой формы редактирования, наследующийся от ICSSoft.STORMNET.UI.BaseIndpdEdit.
* .Net-интерфейс для зависимой формы редактирования.
* UI-зависимая форма редактирования (если необходимо).
* Атрибуты формы генерируются следующим образом:

  * Если включена генерация UI-зависимой формы, то генерируется .Net-интерфейс UI-зависимой формы редактирования с определением свойства, но только, если этот атрибут публичный.
  * В код UI-зависимой формы генерируется реализующее вышеуказанное интерфейсное определение виртуального свойства, а также приватный член и в обоих аксессорах код по установке/получению значения приватного члена, сопровождаемый скобками программиста.
  * В код UI-независимой формы генерируется определение виртуального свойства с указанным модификатором. Если генерация  UI-зависимой формы включена, то в код свойства генерируется вызов того же свойства UI-зависимой формы через интерфейс.
  * Методы формы генерируются следующим образом:

    * Если включена генерация UI-зависимой формы, то генерируется .Net-интерфейс UI-зависимой формы редактирования с определением метода, но только, если этот метод публичный.
    * В код UI-зависимой формы генерируется реализующий вышеуказанное интерфейсное определение виртуальный метод и в нём скобка программиста (подобно тому, как описано в статье [Методы классов и параметры методов](fd_methods-parameters.html)).
    * В код UI-независимой формы генерируется определение виртуального метода с указанным модификатором. Если генерация UI-зависимой формы включена, то в код метода генерируется вызов того же метода UI-зависимой формы через интерфейс.

## Дополнительно редактируемые свойства и что как генерируется

Самое главное в дополнительно редактируемых свойствах - выбор класса и представления, в котором должен редактироваться объект этого класса. Указание этого производится на закладке "Составные представления":

![Представления для формы редактирования](/images/pages/products/flexberry-winforms/forms/editformviews.jpg)

В `Flexberry Plugins` можно указать только один класс и одно представление, в котором должен редактироваться объект на этой форме. Если указать несколько классов и/или представлений, все, кроме первого, будут проигнорированы.

Итак, для того, чтобы выбрать класс и представление, нужно нажать на кнопку "...":

![Выбор представления](/images/pages/products/flexberry-winforms/forms/view-sel.jpg)

### Закладка "Форма"

![Свойства формы редактирования](/images/pages/products/flexberry-winforms/forms/editformprops.jpg)

| Свойство-Описание | Генерация в .Net-язык |
|--|--|
| `Name` - имя UML-класса | Имя .Net-класса независимой формы и производное от него для зависимой (например, ```winform[Name]```).
| `Description` - некоторое описание класса.| `DocComment` перед определением класса независимой формы
| `Caption` - некоторое пользовательское имя (отображается в пользовательском интерфейсе)| Заголовок на форме
| `GenerateDependedForm`| Если галочка установлена, - генерируется UI-зависимая (WinForm) форма пользовательского интерфейса в исходном коде, что позволяет "вручную" разместить на форме элементы управления. Если галочка не установлена, используется универсальная UI-независимая форма редактирования, на которой элементы управления, соответствующие атрибутам в представлении размещаются автоматически.
| `FixDependedForm`| Если галочка установлена, - UI-зависимая (WinForm) форма не перегенерируется. Это сделано для уверенности в том, что внесённые в форму изменения в части состава и расположения элементов управления не будут потеряны, что иногда происходит из-за наличия (к сожалению) ошибок в среде `Visual Studio .Net`. <br> Если галочка не установлена генерация происходит следующим образом: <br> 1. Если представление (его имя и атрибутный состав) не изменилось, тогда перегенерируется невизуальная часть формы (методы, свойства и т.д.); <br> 2. Если полностью изменилось представление (его имя, т.е. после последней генерации было указано другое используемое представление), то визуальная часть перегенерируется полностью, все элементы управления удаляются и размещаются новые в соответствии с новым представлением. <br>3. Если изменился атрибутный состав представления, то на форму добавляются элементы управления, соответствующие добавленным в представление атрибутам. Эл-ты управления, соотв. удалённым атрибутам не уничтожаются на форме.
| `Packet, NamespacePostfix` - позволяют настроить сборку и пространство имен | см. [Расположение сборок после генерации кода](fo_location-assembly.html).
| `PBCustomAttributes` - позволяет указать, необходима ли скобка программиста непосредственно перед описанием класса для "ручного" внесения атрибутов | Если галочка указана - генерируется скобка программиста для "ручного" внесения .Net атрибутов перед классом независимой формы.
| `PBMembers`| Если галочка указана - генерируется скобка программиста для "ручного" внесения членов класса независимой формы.
| `PropertyLookup`| Позволяет на отдельной форме настроить, какие списковые формы должны открываться с этой формы для выбора соответствующих связанных объектов (мастеров).
| `EditFormOperations`| Настройка доступных на форме операций.
| `PrintContainer` - имя класса со стереотипом `printform`, являющегося печатной формой, которая используется при печати с формы редактирования.| В коде независимой формы генерируется перегрузка метода GetPrinter, в котором:<br>* Если `PrintContainer` не указан, возвращается ошибка `NoSuchContainerException`; <br> * Если `PrintContainer` указан, возвращается тип контейнера; <br>В этом методе перед возвратом значения располагается неотключаемая скобка программиста, в которой можно закодировать "вручную" возвращаемый тип в случае наличия логики, которая, например, возвращает печатную форму в зависимости от свойств объекта.
| `ScriptName` - имя сценария, который должен использоваться этой формой. Соответствует имени EBSD-диаграммы, использующейся для описания сценария.| Метод `GetScript` в классе независимой формы перегружается таким образом, что возвращает из провайдера сценариев сценарий с указанным именем.
| `PublishToEBSD`| Если галочка указана - перед классом независимой формы генерируется указание атрибута `PublishToEBSDAttribute`, который указывает доступность данного класса для использования в редакторе диаграмм сценариев.|

#### PropertyLookup

`PropertyLookup` генерируется в код метода `GetEditor` UI-независимой формы редактирования, который и возвращает тип списковой формы в зависимости от имени мастерового свойства.

![PropertyLookup](/images/pages/products/flexberry-winforms/forms/propertylookup.jpg)

В верхнем списке расположены мастеровые свойства, в нижнем выпадающем списке следует выбрать форму, которая должна открываться для выбора пользователем соотв. связанного объекта.

#### EditFormOperations

Позволяет указать, какие операции доступны на этой форме (соответственно, какие кнопки появляются на панели управления):

* `Save` - сохранение;
* `Save and Close` - сохранение с последующим закрытием формы;
* `Print` - печать;
* `Print preview` - предварительный просмотр.

![EditFormOperations](/images/pages/products/flexberry-winforms/forms/editformoperations.jpg)

Генерируется:

* Если используется универсальная форма (галочка `GenerateDependedForm` не установлена), генерируется параметром при вызове конструктора зависимой формы в методе `GetDpdForm()` независимой формы;
* Если используется генерируемая форма, генерируется напрямую в зависимой форме установкой видимости кнопок панели инструментов.

### Свойства атрибутов

Свойства атрибутов аналогичны указанным в статье [Атрибуты классов данных](fo_attributes-class-data.html), с учётом вышеуказанных (в п 4 "Что генерируется") замечаний.

### Свойства методов

Свойства методов аналогичны указанным в статье [Методы классов и параметры методов](fd_methods-parameters.html), с учётом вышеуказанных (в п 5"Что генерируется") замечаний.

## Связанные статьи

[E-представление](fd_e-view.html)
